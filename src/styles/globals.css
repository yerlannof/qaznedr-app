@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile Touch Optimizations */
@layer base {
  html {
    -webkit-tap-highlight-color: transparent;
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
    touch-action: manipulation;
  }

  body {
    overscroll-behavior: none;
  }
}

/* Safe Area Support */
@layer utilities {
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }

  .safe-inset {
    padding: env(safe-area-inset-top) env(safe-area-inset-right)
      env(safe-area-inset-bottom) env(safe-area-inset-left);
  }

  /* Touch Target Sizes */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
    @apply inline-flex items-center justify-center;
  }

  .touch-target-sm {
    min-height: 36px;
    min-width: 36px;
    @apply inline-flex items-center justify-center;
  }

  /* Mobile Scrolling */
  .mobile-scroll {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: contain;
    scroll-behavior: smooth;
  }

  /* Disable animations on mobile for performance */
  @media (hover: none) and (pointer: coarse) {
    .reduce-motion-mobile * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Mobile-only utilities */
  @media (max-width: 640px) {
    .no-scroll-mobile {
      overflow: hidden;
      position: fixed;
      width: 100%;
      height: 100%;
    }

    .mobile-full-height {
      height: calc(
        100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom)
      );
      height: calc(
        100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom)
      );
    }
  }
}

:root {
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --destructive-foreground: 210 40% 98%;
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --destructive-foreground: 210 40% 98%;
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

* {
  @apply border-border;
}

body {
  @apply bg-background text-foreground;
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }

  /* Performance optimizations with CSS Containment */
  .listing-card {
    contain: layout style paint;
    will-change: transform;
  }

  .listing-grid {
    contain: layout;
  }

  .image-container {
    contain: layout style;
  }

  .modal-content {
    contain: layout style paint;
  }

  /* Optimize scrolling performance */
  .scrollable {
    contain: strict;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Optimize animation performance */
  .animate-optimized {
    will-change: transform, opacity;
    transform: translateZ(0);
  }

  /* Critical CSS optimizations */
  .hero-section {
    contain: layout style;
  }

  .search-filters {
    contain: layout;
  }

  /* Font loading optimization */
  @font-face {
    font-family: 'Geist';
    font-display: swap;
  }

  /* Image optimization */
  img {
    content-visibility: auto;
    contain-intrinsic-size: 300px 200px;
  }

  /* Content visibility for performance */
  .lazy-section {
    content-visibility: auto;
    contain-intrinsic-size: 0 500px;
  }

  /* Leaflet map customizations */
  .leaflet-container {
    font-family: inherit;
  }

  .leaflet-popup-content-wrapper {
    border-radius: 8px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
  }

  .leaflet-popup-tip {
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .leaflet-control-zoom a {
    border-radius: 6px;
    color: #374151;
  }

  .leaflet-control-zoom a:hover {
    background-color: #f3f4f6;
  }

  /* Custom marker animations */
  .leaflet-marker-icon {
    transition: transform 0.2s ease;
  }

  .leaflet-marker-icon:hover {
    transform: scale(1.1);
  }

  /* Map loading state */
  .leaflet-tile-loading {
    opacity: 0.5;
  }

  /* Shimmer animation for skeletons */
  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  /* Enhanced hover effects */
  .hover-lift {
    transition:
      transform 0.2s ease-out,
      box-shadow 0.2s ease-out;
  }

  .hover-lift:hover {
    transform: translateY(-4px);
    box-shadow:
      0 10px 25px -5px rgba(0, 0, 0, 0.1),
      0 8px 10px -6px rgba(0, 0, 0, 0.1);
  }

  /* Smooth gradient animation */
  @keyframes gradient-shift {
    0%,
    100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }
}
